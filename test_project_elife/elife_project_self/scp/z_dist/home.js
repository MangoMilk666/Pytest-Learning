import{jfetch as i}from"/share.js";class t extends React.Component{constructor(s){super(s),this.state={activeIdx:0},this.interval=null}componentDidMount(){this.setupLoopShow()}setupLoopShow(){this.interval=setInterval(()=>{let s=this.state.activeIdx+1;s>=this.props.imgs.length&&(s=0),this.setState({activeIdx:s})},4e3)}componentWillUnmount(){this.interval&&clearInterval(this.interval)}render(){return React.createElement("div",{className:"home-slide"},this.props.imgs.map((s,a)=>React.createElement("img",{src:s,key:a,style:{width:"100%",cursor:"pointer",display:this.state.activeIdx===a?"":"none"},onClick:()=>{this.props.clickOne(this.state.activeIdx)}})),React.createElement("div",{className:"trigger"},this.props.imgs.map((s,a)=>React.createElement("span",{key:a,className:a===this.state.activeIdx?"on":"",onClick:()=>{this.setState({activeIdx:a}),clearInterval(this.interval),this.setupLoopShow()}}))))}}export default class n extends React.Component{constructor(s){super(s);let a=location.hash.split("/");this.deviceSn=a[2],this.portNum=a[3],this.state={balance:0,banner:[{img:"/assets/images/1.png"},{img:"/assets/images/2.png"},{img:"/assets/images/3.png"}]}}async componentDidMount(){let s=await i("/api/customer/get-my-info");this.setState({balance:s.balance})}render(){return React.createElement("div",{className:"home"},React.createElement("div",{className:"topbar",style:{color:"#03a9f4",margin:"1rem"}},sessionStorage.displayName," ，余额 ",this.state.balance),React.createElement(t,{imgs:this.state.banner.map(s=>s.img),clickOne:s=>{}}),React.createElement("div",{className:"functions"},React.createElement("div",{className:"block",onClick:()=>{location.hash="#/deposit"}},React.createElement("span",{className:"icon"}),React.createElement("div",{className:"text"},"在线充值")),React.createElement("div",{className:"block",onClick:()=>{location.hash="#/my_chargers"}},React.createElement("span",{className:"icon"}),React.createElement("div",{className:"text"},"常用充电")),React.createElement("div",{className:"block",onClick:()=>{location.hash="#/my_carwashers"}},React.createElement("span",{className:"icon"}),React.createElement("div",{className:"text"},"常用洗车")),React.createElement("div",{className:"block",onClick:()=>{location.hash="#/my_lockers"}},React.createElement("span",{className:"icon"}),React.createElement("div",{className:"text"},"常用储柜")),React.createElement("div",{className:"block",onClick:()=>{location.hash="#/svc_record"}},React.createElement("span",{className:"icon"}),React.createElement("div",{className:"text"},"消费记录")),React.createElement("div",{className:"block",onClick:()=>{location.hash="#/myprofile"}},React.createElement("span",{className:"icon"}),React.createElement("div",{className:"text"},"个人中心"))),React.createElement("div",{className:"news"},React.createElement("div",{className:"news-item"},"双11充值优惠来了"),React.createElement("div",{className:"news-item"},"襄垣中学自助洗车站开业了"),React.createElement("div",{className:"news-item"},"秀月家园充电站暂停服务一天"),React.createElement("div",{className:"news-item"},"这样充电更省钱哦"),React.createElement("div",{className:"news-item"},"自助洗车这样操作更省钱")))}}
