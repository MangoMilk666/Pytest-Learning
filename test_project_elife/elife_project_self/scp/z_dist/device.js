import{jfetch as i}from"/share.js";class s extends React.Component{constructor(e){super(e),this.state={deviceDesc:"--",deviceHealth:2,devicePorts:[]}}componentDidMount(){this.getDeviceState()}async getDeviceState(){let e=await i("/api/customer/get-dev-info","get",{device_sn:this.deviceSn});this.setState({deviceDesc:e.deviceDesc,deviceHealth:e.deviceHealth,devicePorts:e.devicePorts})}async startOrStopSvc(e){let a=e.state==="free"?"start-svc":"stop-svc",c=await i(`/api/customer/${a}`,"POST",{device_sn:this.deviceSn,port_no:e.no});this.setState({devicePorts:c.devicePorts})}render(){let e=location.hash.split("/");if(this.deviceSn=e[2],this.curPortNo=e[3]?parseInt(e[3]):null,!this.deviceSn){alert("url必须包含设备号"),window.location.replace("/#/home");return}return this.showDeviceOrPort=this.curPortNo?"port":"device",this.showDeviceOrPort==="device"?this.renderDevice():this.renderPort()}}export class Charger extends s{renderDevice(){return React.createElement("div",{className:"device",style:{display:"grid",gridTemplateRows:"auto  1fr"}},React.createElement("div",{className:"topbar",style:{color:"#03a9f4",margin:".2rem"}},React.createElement("div",{style:{float:"right",cursor:"pointer"},onClick:()=>{location.hash="#/home"}},"返回主页")),React.createElement("div",{className:"desc"},React.createElement("p",null," 电站描述： ",this.state.deviceDesc," "),React.createElement("p",null," 设备状态： ",this.state.deviceHealth===0?"正常":this.state.deviceHealth===1?"异常":"未知"),React.createElement("p",null," 绿色为可用充电位，红色为已使用充电位 "),React.createElement("p",null," 选择一个绿色充电位，为您的爱车进行充电 ")),React.createElement("div",{className:"functions"},this.state.devicePorts.map(e=>React.createElement("div",{className:"device-block",key:e.no,style:{color:e.state==="free"?"green":"red"},onClick:()=>this.startOrStopSvc(e)},React.createElement("span",{className:"icon icon-power-socket-uk"}),React.createElement("div",{className:"text"},"充电口",e.no)))))}renderPort(){if(this.state.devicePorts.length===0)return React.createElement("p",null,"信息加载中...");let e=this.state.devicePorts[this.curPortNo-1];return e?React.createElement("div",{className:"device",style:{display:"grid",gridTemplateRows:"auto  1fr"}},React.createElement("div",{className:"desc"},React.createElement("p",null," 电站描述： ",this.state.deviceDesc," "),React.createElement("p",null," 设备状态： ",this.state.deviceHealth===0?"正常":this.state.deviceHealth===1?"异常":"未知"),React.createElement("p",null," 该充电位： ",e.state==="free"?"可用":"正在使用中"," ")),React.createElement("div",{className:"functions"},React.createElement("div",{className:"device-block",key:e.no,style:{color:e.state==="free"?"green":"red"},onClick:()=>this.startOrStopSvc(e)},React.createElement("span",{className:"icon icon-power-socket"}),React.createElement("div",{className:"text"},"充电口",e.no)))):React.createElement("p",null,"该充电口不存在")}}export class CarWasher extends s{renderDevice(){return React.createElement("div",{className:"device",style:{display:"grid",gridTemplateRows:"auto  1fr"}},React.createElement("div",{style:{color:"#03a9f4",margin:".2rem"}},React.createElement("div",{style:{float:"right",cursor:"pointer"},onClick:()=>{location.hash="#/home"}},"返回主页")),React.createElement("div",{className:"desc"},React.createElement("p",null," 洗车站描述： ",this.state.deviceDesc," "),React.createElement("p",null," 设备状态： ",this.state.deviceHealth===0?"正常":this.state.deviceHealth===1?"异常":"未知"),React.createElement("p",null," 绿色为可用洗车位，红色为已使用洗车位 "),React.createElement("p",null," 选择一个绿色车位洗车 ")),React.createElement("div",{className:"functions"},this.state.devicePorts.map(e=>React.createElement("div",{className:"device-block",key:e.no,style:{color:e.state==="free"?"green":"red"},onClick:()=>this.startOrStopSvc(e)},React.createElement("span",{className:"icon icon-car"}),React.createElement("div",{className:"text"},"洗车位",e.no)))))}renderPort(){if(this.state.devicePorts.length===0)return React.createElement("p",null,"信息加载中...");let e=this.state.devicePorts[this.curPortNo-1];return e?React.createElement("div",{className:"device",style:{display:"grid",gridTemplateRows:"auto  1fr"}},React.createElement("div",{className:"desc"},React.createElement("p",null," 洗车站描述： ",this.state.deviceDesc," "),React.createElement("p",null," 洗车位状态： ",this.state.deviceHealth===0?"正常":this.state.deviceHealth===1?"异常":"未知"),React.createElement("p",null," 该洗车位： ",e.state==="free"?"可用":"正在使用中"," ")),React.createElement("div",{className:"functions"},React.createElement("div",{className:"device-block",key:e.no,style:{color:e.state==="free"?"green":"red"},onClick:()=>this.startOrStopSvc(e)},React.createElement("span",{className:"icon icon-car"}),React.createElement("div",{className:"text"},"洗车位 ",e.no)))):React.createElement("p",null,"该洗车位不存在")}}export class Locker extends s{renderDevice(){return React.createElement("div",{className:"device",style:{display:"grid",gridTemplateRows:"auto  1fr"}},React.createElement("div",{style:{color:"#03a9f4",margin:".2rem"}},React.createElement("div",{style:{float:"right",cursor:"pointer"},onClick:()=>{location.hash="#/home"}},"返回主页")),React.createElement("div",{className:"desc"},React.createElement("p",null," 存储柜描述： ",this.state.deviceDesc," "),React.createElement("p",null," 设备状态： ",this.state.deviceHealth===0?"正常":this.state.deviceHealth===1?"异常":"未知"),React.createElement("p",null," 绿色为可用存储柜位，红色为已使用存储柜位 "),React.createElement("p",null," 选择一个绿色存储柜位 ")),React.createElement("div",{className:"functions"},this.state.devicePorts.map(e=>React.createElement("div",{className:"device-block",key:e.no,style:{color:e.state==="free"?"green":"red"},onClick:()=>this.startOrStopSvc(e)},React.createElement("div",{style:{border:"1px solid "+(e.state==="free"?"green":"red"),padding:"1rem"}}),React.createElement("div",{className:"text"},"柜位 ",e.no)))))}renderPort(){if(this.state.devicePorts.length===0)return React.createElement("p",null,"信息加载中...");let e=this.state.devicePorts[this.curPortNo-1];return e?React.createElement("div",{className:"device",style:{display:"grid",gridTemplateRows:"auto  1fr"}},React.createElement("div",{className:"desc"},React.createElement("p",null," 柜位描述： ",this.state.deviceDesc," "),React.createElement("p",null," 柜位状态： ",this.state.deviceHealth===0?"正常":this.state.deviceHealth===1?"异常":"未知"),React.createElement("p",null," 该柜位： ",e.state==="free"?"可用":"正在使用中"," ")),React.createElement("div",{className:"functions"},React.createElement("div",{className:"device-block",key:e.no,style:{color:e.state==="free"?"green":"red"},onClick:()=>this.startOrStopSvc(e)},React.createElement("div",{style:{border:"1px solid "+(e.state==="free"?"green":"red"),padding:"1rem"}}),React.createElement("div",{className:"text"},"柜位 ",e.no)))):React.createElement("p",null,"该柜不存在")}}
