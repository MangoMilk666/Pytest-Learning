import{jfetch as s}from"/share.js";export default class i extends React.Component{constructor(e){super(e);let t=location.hash.split("/");this.deviceSn=t[2],this.portNum=t[3],this.state={svcRecords:[]},this.pageNum=1}async componentDidMount(){let e=await s("/api/customer/svc-record?pagenum=1");this.setState({svcRecords:e.records})}render(){return React.createElement("div",{className:"home"},React.createElement("div",{className:"topbar",style:{color:"#03a9f4",margin:".2rem"}},React.createElement("div",{style:{float:"right",cursor:"pointer"},onClick:()=>{location.hash="#/home"}},"返回主页")),React.createElement("div",{className:"result-list"},this.state.svcRecords.length===0?React.createElement("p",null,"没有记录"):React.createElement(React.Fragment,null,this.state.svcRecords.map(e=>React.createElement("div",{className:"result-list-item",key:e.id,style:{flexDirection:"column",gap:".2rem"}},React.createElement("div",{style:{color:"#9e9e9e"}},e.start_time.substring(0,16).replace("T"," ")),React.createElement("div",{style:{color:"#ff9800"}},"金额：",e.fee," 元"),React.createElement("div",{style:{color:"#03a9f4"}},"使用：",e.sr_desc),React.createElement("div",{style:{color:"#9e9e9e"}},"设备：",e.device_desc))),React.createElement("div",{style:{padding:"1rem 0",cursor:"pointer",textAlign:"center",color:"#03a9f4",borderBottom:"1px solid #4caf50;"},onClick:async()=>{this.pageNum+=1;let e=await s("/api/customer/svc-record?pagenum="+this.pageNum);e.records.length>0?this.setState({svcRecords:[...this.state.svcRecords,...e.records]}):(this.pageNum-=1,alert("没有更多记录了"))}},"更多记录"))))}}
